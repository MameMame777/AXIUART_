# AXIUART Driver - 任意メモリアクセス機能 追加完了

**日付**: 2025年10月4日  
**機能追加**: 任意のアドレスに任意のデータを書き込める汎用メモリアクセス機能

## ✅ 追加された機能

### 1. 汎用メモリアクセス機能 ✅

新しい「Memory」タブを追加し、以下の機能を実装：

#### 直接メモリアクセス
- **任意アドレス指定**: 32bitアドレス空間内の任意のアドレスにアクセス
- **16進数入力対応**: `1000`、`0x1000`両方の形式をサポート
- **データ幅選択**: 8/16/32bit幅でのアクセス
- **読み書き操作**: 単一アドレスの読み出し・書き込み
- **書き込み検証**: Write & Verify機能で書き込み後の自動読み返し確認

#### バルク操作機能
- **連続読み出し**: 指定アドレスから複数ワードの連続読み出し
- **パターン書き込み**: 指定範囲に同一パターンでの一括書き込み
- **メモリテスト**: 複数パターンでの書き込み・読み返しテスト

#### メモリダンプ表示
- **フォーマット済み表示**: アドレス・データ・ASCII表示
- **タイムスタンプ**: 全操作に時刻記録
- **操作履歴**: 全メモリアクセスの詳細ログ
- **ファイル保存**: メモリダンプの外部ファイル保存

## 🚀 実装された詳細機能

### 入力値検証
```
✓ 16進数自動解析 (0x付き/なし両対応)
✓ データ幅範囲チェック
✓ アドレス有効性確認
✓ エラー条件の適切な処理
```

### 操作タイプ
```
✓ Direct Read      - 単一アドレス読み出し
✓ Direct Write     - 単一アドレス書き込み  
✓ Write & Verify   - 書き込み後読み返し確認
✓ Bulk Read        - 連続アドレス読み出し
✓ Memory Fill      - パターン一括書き込み
✓ Memory Test      - 複数パターンテスト
```

### データ幅対応
```
✓ 8bit (0x00 - 0xFF)
✓ 16bit (0x0000 - 0xFFFF)  
✓ 32bit (0x00000000 - 0xFFFFFFFF)
```

## 📋 GUI構成

### Memory タブの構成
1. **Direct Memory Access**
   - Address (Hex): アドレス入力フィールド
   - Data (Hex): データ入力・表示フィールド
   - Data Width: 8/16/32bit選択
   - Read/Write/Write & Verify/Clear ボタン

2. **Bulk Memory Operations**
   - Start Address: 開始アドレス
   - Count: 操作ワード数
   - Fill Pattern: 書き込みパターン
   - Bulk Read/Fill Memory/Memory Test ボタン

3. **Memory Dump**
   - タイムスタンプ付き操作履歴
   - 16進数 + ASCII表示
   - Clear Dump/Save Dump ボタン
   - Format as Hex Dump チェックボックス

## 🎯 使用例

### 基本的な使い方

#### レジスタへの直接アクセス
```
Address: 1000 (CONTROL レジスタ)
Data: 1 (ブリッジ有効)
Width: 32
→ Write ボタンクリック
```

#### 任意メモリ領域のテスト
```
Start Address: 2000
Count: 8  
Fill Pattern: DEADBEEF
→ Memory Test ボタンクリック
```

#### 連続領域の読み出し
```
Start Address: 1000
Count: 8
→ Bulk Read ボタンクリック
```

### 高度な使用例

#### デバッグ時のメモリ確認
1. 疑わしいアドレスを直接読み出し
2. 期待値を書き込んで動作確認
3. Write & Verify で書き込み成功を確認

#### メモリマップの検証
1. 各レジスタアドレスの連続読み出し
2. アクセス可能領域の確認
3. 書き込み禁止領域の特定

## 🔧 技術的特徴

### エラーハンドリング
- **入力値検証**: 不正な16進数値の検出
- **範囲チェック**: データ幅に対する値の妥当性確認
- **通信エラー**: UART通信失敗の適切な処理
- **ユーザーフィードバック**: わかりやすいエラーメッセージ

### パフォーマンス
- **効率的なバルク操作**: 複数アドレスの高速アクセス
- **非同期処理**: UI応答性の維持
- **メモリ効率**: 大量データ処理でのメモリ使用量最適化

### 安全性
- **確認ダイアログ**: 危険な操作（メモリテスト、バルク書き込み）での確認
- **操作ログ**: 全操作の詳細記録
- **検証機能**: 書き込み後の自動確認

## 📈 開発・デバッグへの貢献

### 即座の価値
- **任意アドレスアクセス**: レジスタマップ外の領域も自由にアクセス
- **書き込み検証**: データ整合性の即座確認
- **操作履歴**: デバッグ作業の追跡可能性

### 運用面での利点
- **柔軟性**: 事前定義不要の完全自由アクセス
- **効率性**: バルク操作による作業時間短縮
- **安全性**: 確認機能による誤操作防止

### 品質向上
- **メモリテスト**: ハードウェア品質の系統的検証
- **パターンテスト**: 各種条件下での動作確認
- **ログ記録**: 問題発生時の詳細な証跡

## 🎉 完成した機能セット

### Phase 2 + Memory Extension 完了
```
✓ 基本GUI機能 (Connection/Registers/Status/Logs)
✓ 定義済みレジスタアクセス
✓ 任意メモリアクセス ← NEW!
✓ バルク操作機能 ← NEW!
✓ メモリテスト機能 ← NEW!
✓ 包括的ログ機能
✓ エラーハンドリング
```

この拡張により、AXIUART Driverは完全な汎用メモリアクセスツールとして、どのようなアドレス・データでも自由に操作できる強力なデバッグ環境となりました。RTL実装後の検証作業において、レジスタマップの制約を超えた柔軟なメモリアクセスが可能になります。