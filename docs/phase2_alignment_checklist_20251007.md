# Phase 2 実行チェックリスト - AXIアライメントエラー解決

## 📋 **Step 2-1: アライメントエラーの詳細分析**

### 実行手順
```bash
# 1. アライメントエラー確認
cd E:\Nautilus\workspace\fpgawork\AXIUART_\sim\uvm
type dsim.log | findstr /i "alignment"
type dsim.log | findstr /i "addr_ok"

# 2. エラー発生時のアドレス確認
type dsim.log | findstr /i "0x1000\|0x1004\|0x1008\|0x100C"
```

### チェックリスト
- [ ] **2-1-1**: アライメントエラー発生箇所の特定完了
  - エラーメッセージ: `CHECK_ALIGNMENT -> ERROR`
  - 発生行番号: ___________
  - 発生時刻: ___________
  - 備考: ___________________

- [ ] **2-1-2**: エラー発生時のアドレス値記録完了
  - エラー発生アドレス1: ___________
  - エラー発生アドレス2: ___________
  - エラー発生アドレス3: ___________
  - 備考: ___________________

- [ ] **2-1-3**: 対象レジスタアドレスでの発生パターン確認完了
  - 0x1000 (CONFIG): [ ] エラー発生 / [ ] 正常
  - 0x1004 (DEBUG): [ ] エラー発生 / [ ] 正常
  - 0x1008 (STATUS): [ ] エラー発生 / [ ] 正常
  - 0x100C (CONTROL): [ ] エラー発生 / [ ] 正常
  - 備考: ___________________

- [ ] **2-1-4**: アライメントチェックの期待動作確認完了
  - 32bit境界判定: [ ] 正常 / [ ] 異常
  - addr_ok信号: [ ] 期待通り / [ ] 期待と異なる
  - AXI仕様適合: [ ] 適合 / [ ] 不適合
  - 備考: ___________________

**Step 2-1 完了判定**: 全てのチェックボックスが完了し、問題パターンが特定されていること

---

## 📋 **Step 2-2: Address_Aligner.sv の実装確認**

### 実行手順
```bash
# 1. Address_Aligner モジュール確認
cd E:\Nautilus\workspace\fpgawork\AXIUART_\rtl
findstr /n /i "addr.*ok\|alignment" Address_Aligner.sv

# 2. アライメントチェックロジック詳細確認
findstr /n /A 5 /B 5 "CHECK_ALIGNMENT" Address_Aligner.sv
```

### チェックリスト
- [ ] **2-2-1**: アライメントチェックロジック確認完了
  - アライメントチェック開始行: ___________
  - 判定ロジック: ___________
  - 使用している演算: ___________
  - 備考: ___________________

- [ ] **2-2-2**: addr_ok信号生成ロジック確認完了
  - addr_ok生成箇所: ___________
  - 生成条件: ___________
  - デフォルト値: ___________
  - 備考: ___________________

- [ ] **2-2-3**: 32bit アライメント判定の実装確認完了
  - 判定式: ___________
  - ビットマスク: ___________
  - 期待結果: ___________
  - 備考: ___________________

- [ ] **2-2-4**: レジスタベースアドレス0x1000との整合性確認完了
  - ベースアドレス定義: ___________
  - オフセット計算: ___________
  - 整合性: [ ] OK / [ ] NG
  - 備考: ___________________

- [ ] **2-2-5**: AXI プロトコル仕様との適合性確認完了
  - AXI仕様準拠: [ ] 適合 / [ ] 不適合
  - 問題箇所: ___________
  - 修正必要性: [ ] あり / [ ] なし
  - 備考: ___________________

**Step 2-2 完了判定**: 全てのチェックボックスが完了し、問題箇所が特定されていること

---

## 📋 **Step 2-3: アライメント判定の修正**

### 実行手順
```bash
# 1. Address_Aligner.sv のバックアップ作成
cd E:\Nautilus\workspace\fpgawork\AXIUART_\rtl
copy Address_Aligner.sv Address_Aligner.sv.backup

# 2. 修正実施
# (特定された問題に基づいてコード修正)

# 3. 修正後コンパイル確認
cd ..\sim\uvm
.\run_uvm.ps1 -mode compile
```

### チェックリスト
- [ ] **2-3-1**: 32bit境界判定の問題箇所特定完了
  - 問題箇所: ___________
  - 問題内容: ___________
  - 修正方針: ___________
  - 備考: ___________________

- [ ] **2-3-2**: レジスタアドレスでのアライメント判定修正完了
  - 修正箇所: ___________
  - 修正前の判定式: ___________
  - 修正後の判定式: ___________
  - 備考: ___________________

- [ ] **2-3-3**: addr_ok信号の生成条件修正完了
  - 修正の必要性: [ ] あり / [ ] なし
  - 修正箇所: ___________
  - 修正内容: ___________
  - 備考: ___________________

- [ ] **2-3-4**: AXI Master状態遷移への影響確認完了
  - 状態遷移への影響: [ ] あり / [ ] なし
  - 影響内容: ___________
  - 追加修正: [ ] 必要 / [ ] 不要
  - 備考: ___________________

- [ ] **2-3-5**: 修正後のコンパイル確認完了
  - コンパイル結果: [ ] 成功 / [ ] 失敗
  - エラーメッセージ: ___________
  - 追加修正: [ ] 必要 / [ ] 不要
  - 備考: ___________________

**Step 2-3 完了判定**: 全ての修正が完了し、コンパイルが成功していること

---

## 📋 **Step 2-4: AXI Master状態遷移の確認**

### 実行手順
```bash
# 1. AXI Master状態遷移確認
cd E:\Nautilus\workspace\fpgawork\AXIUART_\rtl
findstr /n /i "state\|addr_ok" Axi_Master.sv

# 2. アライメントエラー処理確認
findstr /n /A 10 /B 5 "alignment\|addr_ok" Axi_Master.sv
```

### チェックリスト
- [ ] **2-4-1**: 状態遷移確認完了
  - 状態定義箇所: ___________
  - アライメント関連状態: ___________
  - 状態遷移条件: ___________
  - 備考: ___________________

- [ ] **2-4-2**: アライメントエラー時の状態処理確認完了
  - エラー検出箇所: ___________
  - エラー時の状態: ___________
  - エラー処理: ___________
  - 備考: ___________________

- [ ] **2-4-3**: addr_ok信号と状態遷移の関係確認完了
  - addr_ok使用箇所: ___________
  - 状態遷移条件: ___________
  - 関係性: [ ] 適切 / [ ] 不適切
  - 備考: ___________________

- [ ] **2-4-4**: エラー状態からの復帰処理確認完了
  - 復帰処理: [ ] あり / [ ] なし
  - 復帰条件: ___________
  - 復帰先状態: ___________
  - 備考: ___________________

- [ ] **2-4-5**: AXI プロトコル準拠性確認完了
  - プロトコル準拠: [ ] 適合 / [ ] 不適合
  - 問題箇所: ___________
  - 修正必要性: [ ] あり / [ ] なし
  - 備考: ___________________

**Step 2-4 完了判定**: 全てのチェックボックスが完了し、状態遷移が適切であること

---

## 📋 **Step 2-5: アライメント修正の動作確認**

### 実行手順
```bash
# 1. 修正されたRTLでUVMテスト実行
cd E:\Nautilus\workspace\fpgawork\AXIUART_\sim\uvm
.\run_uvm.ps1

# 2. 結果確認
type dsim.log | findstr /i "alignment"
type dsim.log | findstr /i "addr_ok"
type dsim.log | findstr /i "uvm_error"
```

### チェックリスト
- [ ] **2-5-1**: UVMシミュレーション実行完了
  - 実行時間: ___________
  - 実行結果: [ ] 正常終了 / [ ] エラー終了
  - 備考: ___________________

- [ ] **2-5-2**: アライメントエラーの解消確認完了
  - アライメントエラー発生: [ ] なし / [ ] あり
  - 残存エラー数: ___________
  - 解消確認: [ ] 完全解消 / [ ] 部分解消 / [ ] 未解消
  - 備考: ___________________

- [ ] **2-5-3**: AXI トランザクション正常実行確認完了
  - AXI書き込みトランザクション: [ ] 成功 / [ ] 失敗
  - AXI読み出しトランザクション: [ ] 成功 / [ ] 失敗
  - エラー応答: [ ] なし / [ ] あり
  - 備考: ___________________

- [ ] **2-5-4**: 波形ファイルでAXI信号タイミング確認完了
  - 波形ファイル: [ ] 生成済み / [ ] 生成失敗
  - AXI信号タイミング: [ ] 正常 / [ ] 異常
  - addr_ok信号動作: [ ] 正常 / [ ] 異常
  - 備考: ___________________

**Step 2-5 完了判定**: アライメントエラーが完全に解消され、AXIトランザクションが正常実行されること

---

## 🎯 **Phase 2 完了判定**

### 成功条件
- [ ] 全てのアライメントエラーが解消されている
- [ ] AXI トランザクションが正常に実行される
- [ ] addr_ok信号が期待通りに動作している
- [ ] 修正内容がGitにコミットされている

### 次のアクション
Phase 2が完了したら、Todo管理を更新し、Phase 3（レジスタアクセス動作検証）に進む

### 品質確認
- [ ] コンパイルエラーなし
- [ ] 回帰テスト実施済み（CRCエラー再発なし）
- [ ] 修正内容文書化済み
- [ ] Git管理済み

---

*このチェックリストに従って、1つずつ確実にアライメントエラーを解決すること*