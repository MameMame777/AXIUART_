# Development Diary â€” 2025-11-08

## Context

- Tasked with resolving UART loopback monitor mis-detection during UVM-only debug runs.
- Prior DSIM runs flagged `PARSE_ERROR_SOF_MISMATCH` (monitor sampled 0xB4 instead of expected 0x5A).

## Actions

- Updated `sim/uvm/agents/uart/uart_monitor.sv::collect_uart_tx_byte` to reuse `cfg.get_bit_time_cycles()` and `cfg.get_half_bit_cycles()`.
- Adjusted sampling schedule to advance one full bit period after the start-bit midpoint, aligning the first data sample with the center of bit[0].
- Confirmed loopback configuration remains isolated from full RTL tests.

## Verification

- `python mcp_server/mcp_client.py --workspace e:\Nautilus\workspace\fpgawork\AXIUART_ --tool run_uvm_simulation --test-name uart_axi4_uvm_loopback_test --mode run --verbosity UVM_MEDIUM --waves --timeout 300 --plusarg +UVM_LOOPBACK=1`
  - Result: PASS, monitor publishes TX frame `0x5A 0x00 0x00 0x00`, no parse errors or driver fallbacks.
  - Artifacts: `sim/exec/logs/uart_axi4_uvm_loopback_test_20251108_153912.log`, `archive/waveforms/uart_axi4_uvm_loopback_test_20251108_153912.mxd`.

## Notes

- No other UVM components required modification.
- Full-system test (`uart_axi4_basic_test`) remains unaffected and continues to pass.
- Ready for baud-rate variation tests; timing helpers now shared across driver, monitor, and loopback model.
